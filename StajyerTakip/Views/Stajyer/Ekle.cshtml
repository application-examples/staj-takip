
@{
    ViewData["Title"] = "Ekle";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
    label.cabinet {
        display: block;
        cursor: pointer;
    }

        label.cabinet input.file {
            position: relative;
            height: 100%;
            width: auto;
            opacity: 0;
            -moz-opacity: 0;
            filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0);
            margin-top: -30px;
        }

    #upload-demo {
        width: 460px;
        height: 400px;
        padding-bottom: 25px;
    }

    figure figcaption {
        position: absolute;
        color: #fff;
        left:15%;
        bottom: 20%;
        width: 100%;
        text-shadow: 0 0 10px #000;
    }

    <div class="col-md-2 col-xs-12 col-sm-12 text-center bg-dark" style="" >
    <label class="cabinet center-block bg-dark h-100" >
    <figure class="h-100" >
    <img src="" class="gambar img-responsive img-thumbnail" id="item-img-output" / >
    <figcaption class="" > <i class="fa fa-camera" > </i > </figcaption >
    </figure >
    <input type="file" class="item-img file center-block" name="file_photo" / >
    </label >
    <div class="modal fade" id="cropImagePop" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" >
    <div class="modal-dialog" >
    <div class="modal-content" >
    <div class="modal-header" >
    <button type="button" class="close" data-dismiss="modal" aria-label="Close" > <span aria-hidden="true" > &times;</span > </button >
    <h4 class="modal-title" id="myModalLabel" >
    <?=multiLanguage( "Edit Foto", "Edit Photo" )? >
    </h4 >
    </div >
    <div class="modal-body" >
    <div id="upload-demo" class="center-block text-center" > </div >
    </div >
    <div class="modal-footer" >
    <button type="button" class="btn btn-default" data-dismiss="modal" > Close</button >
    <button type="button" id="cropImageBtn" class="btn btn-primary" > Crop</button >
    </div >
    </div >
    </div >
    </div >
    </div >
</style>

<div class="container border-secondary">
    <div class="row">
        <div class="col-md-2 h-25  ">
            <label class="cabinet center-block h-100">
                <figure class="h-100">
                    <img src="" class="gambar img-responsive img-thumbnail" id="item-img-output" / >
                    <figcaption class=""> <i class="fa fa-camera"> </i> </figcaption>
                </figure>
                <input type="file" class="item-img file center-block" name="file_photo" / >
            </label>
            <div class="modal fade" id="cropImagePop" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true"> &times;</span> </button>
                            <h4 class="modal-title" id="myModalLabel">
                                <?=multiLanguage( "Edit Foto", "Edit Photo" )? >
                            </h4>
                        </div>
                        <div class="modal-body">
                            <div id="upload-demo" class="center-block text-center"> </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal"> Close</button>
                            <button type="button" id="cropImageBtn" class="btn btn-primary"> Crop</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-8">
            <form class="forms-sample" method="post" enctype="multipart/form-data">
                <h5 class="">Hesap Bilgileri</h5>

                <hr />

                <div class="card card-body">
                    <div class="form-group">
                        <label for="ad">Ad</label>
                        <input type="text" class="form-control" id="ad" name="Profil.Ad" placeholder="Ad">
                    </div>
                    <div class="form-group">
                        <label for="soyad">Soyad</label>
                        <input type="text" class="form-control" id="soyad" name="Profil.Soyad" placeholder="Soyad">
                    </div>
                    <div class="form-group">
                        <label for="kullaniciadi">Kullanıcı Adı</label>
                        <input type="text" class="form-control" id="kullaniciadi" name="Profil.KullaniciAdi" placeholder="Kullancı Adı">
                    </div>
                    <div class="form-group">
                        <label for="Sifre">Şifre</label>
                        <input type="password" class="form-control" id="Sifre" name="Profil.Sifre" placeholder="Şifre">
                    </div>

                    <div class="form-row">
                        <div class="form-group col-sm-4">
                            <label for="GunSayisi">Staj Süresi(Gün)</label>
                            <input type="text" id="GunSayisi" name="GunSayisi" class="form-control" placeholder="Staj Gün Sayısı" />
                        </div>

                        <div class="form-group col-sm-4">
                            <label for="baslangictarihi">Başlangıç Tarihi:</label>
                            <input type="date" class="form-control" id="baslangictarihi" name="BaslangicTarihi" placeholder="Başlangıç Tarihi">
                        </div>

                        <div class="form-group col-sm-4">
                            <label for="bitistarihi">Bitiş Tarihi:</label>
                            <input type="date" class="form-control" id="bitistarihi" name="BitisTarihi" placeholder="Bitiş Tarihi">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="email">Email Adres</label>
                        <input type="email" class="form-control" id="email" name="Profil.Email" placeholder="Email">
                    </div>
                    <div class="form-group">
                        <label for="birim">Birim</label>
                        <select name="Birimler[]" id="select2" multiple="multiple" class="form-control bootstrap-select" asp-items="ViewBag.Birimler"></select>
                    </div>
                </div>
                <h5>İletişim Bilgileri</h5>
                <hr />
                <div class="card card-body ">
                    <div class="form-group">
                        <label for="telefonnumarasi">Telefon Numarası:</label>
                        <input type="text" class="form-control bfh-phone" data-format="+90 (ddd) ddd-dddd" name="Profil.Telefon" placeholder="Telefon Numarası">
                    </div>
                    <div class="form-group">
                        <label for="okul">Okulu:</label>
                        <input type="text" class="form-control" id="okul" name="Okul" placeholder="Okul">
                    </div>

                    <div class="form-group">
                        <label for="bolum">Bölümü:</label>
                        <input type="text" class="form-control" id="bolum" name="Bolum" placeholder="Bölüm">
                    </div>

                    <div class="form-group">
                        <label for="adres">Adres</label>
                        <input type="text" class="form-control" id="adres" name="Profil.Adres" placeholder="Adres">
                    </div>

                    <div class="form-row">
                        <div class="form-group col-sm-4">
                            <label for="il">İl</label>
                            <input type="text" class="form-control" id="il" name="Profil.Il" placeholder="İl">
                        </div>

                        <div class="form-group col-sm-4">
                            <label for="ilce">İlçe</label>
                            <input type="text" class="form-control" id="ilce" name="Profil.Ilce" placeholder="İlçe">
                        </div>

                        <div class="form-group col-sm-4">
                            <label for="sokak">Sokak</label>
                            <input type="text" class="form-control" id="sokak" name="Profil.Sokak" placeholder="Sokak">
                        </div>
                    </div>
                </div>
                <input type="text" class="custom-file-input" id="img" name="img" hidden />
                <button type="submit" class="btn btn-success ">Kaydet</button>
                <a href="~/Stajyer/Listele" class="btn btn-primary">İptal</a>
            </form>
        </div>
    </div>
</div>

<script>
    $('#select2').select2();

    $(".gambar").attr("src", "https://user.gadjian.com/static/images/personnel_boy.png");
    var $uploadCrop,
        tempFilename,
        rawImg,
        imageId;
    function readFile(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function (e) {
                $('.upload-demo').addClass('ready');
                $('#cropImagePop').modal('show');
                rawImg = e.target.result;
            }
            reader.readAsDataURL(input.files[0]);
        }
        else {
            swal("Sorry - you're browser doesn't support the FileReader API");
        }
    }

    $uploadCrop = $('#upload-demo').croppie({
        viewport: {
            width: 200,
            height: 200,
        },
        enforceBoundary: false,
        enableExif: true
    });
    $('#cropImagePop').on('shown.bs.modal', function () {
        // alert('Shown pop');
        $uploadCrop.croppie('bind', {
            url: rawImg
        }).then(function () {
            console.log('jQuery bind complete');
        });
    });

    $('.item-img').on('change', function () {
        imageId = $(this).data('id'); tempFilename = $(this).val();
        $('#cancelCropBtn').data('id', imageId); readFile(this);
    });
    $('#cropImageBtn').on('click', function (ev) {
        $uploadCrop.croppie('result', {
            type: 'base64',
            format: 'jpeg',
            size: { width: 200, height: 200 }
        }).then(function (resp) {
            $('#item-img-output').attr('src', resp);
            $('#img').attr('value', resp);
            $('#cropImagePop').modal('hide');
        });
    });
                // End upload preview image
</script>